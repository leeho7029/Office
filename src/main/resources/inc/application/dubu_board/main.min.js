!function(e,t){function i(e){e.find(".tab_box").each(function(){var e=t(this),i=e.find(".tab_inner"),n=e.find(".tab_info"),a=0;if(e.hasClass("ui-tab-active"))return this;e.addClass("ui-tab-active"),n.find(".tab_list").each(function(){a+=t(this).outerWidth()}),n.width()<a&&n.css({width:a+(isMobile()?75:30)+"px",overflow:"visible"}),e.on("click",".link_tab_list",function(e){e.preventDefault(),t(this).tab("show")}).on("click",".btn_tab_prev",function(e){i.animate({scrollLeft:"-="+i.width()+"px"},500)}).on("click",".btn_tab_next",function(e){i.animate({scrollLeft:"+="+i.width()+"px"},500)}).on("click",".tab_list",function(i){e.find(".tab_list.point_bg").removeClass("point_bg"),t(i.currentTarget).addClass("point_bg")})})}function n(e,i){this.$container=t(e),this.options=t.extend({},i||{}),this.init()}function a(e,i){this.$container=t(e),this.options=t.extend({},i||{}),this.init()}function r(e,i){this.$container=t(e),this.options=t.extend({},i||{}),this.init()}n.prototype.init=function(){console.log("main view init"),i(this.$container)},a.prototype.init=function(){console.log("main gallery view init"),i(this.$container),this.$container.find(".gallery_main_article").on("click",function(){location.href=t(this).find(".txt_subject a").attr("href")})},r.prototype.init=function(){console.log("main inquiry view init"),i(this.$container),this.$container.find(".txt_placeholder:visible").on("click",function(e){var i=t(e.currentTarget),n=i.prevAll(".tf_comm, textarea");0==n.size()&&(n=i.nextAll(".tf_comm, textarea")),n.focus()}).each(function(){var e,i=t(this);"label"==this.nodeName&&i.attr("for")?e=t("#"+i.attr("for")):0==(e=t(this).prevAll(".tf_comm, textarea")).size()&&(e=t(this).nextAll(".tf_comm, textarea")),e.val().length>0&&i.hide(),e.on("blur",function(e){t(e.currentTarget).val().length>0||i.show()}).on("focus",function(e){t(e.currentTarget),i.hide()})}),function(e){e.find(".design_checkbox [type=checkbox]").off("change").on("change",function(e){e.stopPropagation(),t(this.parentNode).toggleClass("active",this.checked)}).filter(":checked").parent().addClass("active")}(this.$container),t.fn.selectBox&&this.$container.find("select").selectBox({mobile:!1}),this.$container.find(".tab_content").each(function(e,t){new MainInquiryFormView(t)})},t.extend(r.prototype,{}),MainInquiryFormView=function(e,i){this.$container=t(e),this.options=t.extend({},i||{}),this.init()},t.extend(MainInquiryFormView.prototype,{init:function(){this.deletedFiles=[],this.deletedImgs=[],this.$container.on("click",".btn_file_add",function(e){this.$container.list_id=null!=t(e.currentTarget).data("list-id")?t(e.currentTarget).data("list-id"):"",this.$container.find(".inp_files").trigger("click")}.bind(this)).on("click",".list_file .btn_delete",this.delAttachFile.bind(this)),this.$container.find(".inp_files").fileupload({url:"DUBU_Board/proc",dataType:"json",formData:{proc:"upload_files"},add:this.addAttach.bind(this),progress:function(){},done:this.doneAttach.bind(this)}),this.$container.find(".btn_zip_code").on("click",function(e){"undefined"!=typeof postcodeLoader&&(postcodeLoader.setCallback(function(e){var i=t(this);i.prevAll(".tf_zip_code").val(e.post),i.nextAll(".address_old").children(".user_address1").val(e.address),i.nextAll(".address_new").children(".user_road_address1").val(e.road_address),i.nextAll(".address_old").children(".user_address").eq(1).focus()}.bind(this)),postcodeLoader.open())});var e=this.$container.find(".date_option");e.length&&e.fiDatepicker({lang:"en"}),this.$container.find(".design_checkbox input[type=checkbox]").on("change",function(e){var i=t(this).parents(".element_info"),n=i.data("maxchklen");i.find("input:checked").size()>n&&(t(this).prop("checked",!1),t(this).parent().toggleClass("active",!1),alert("최대 체크개수("+n+")를 초과하셨습니다."))}),this.$container.find(".design_rdobox").click(function(){var e=t(this);return e.parents(".element_cell").find(".design_rdobox input").not(e.children("input")).prop("checked",!1),e.children("input")[0].checked=!0,e.parents(".element_cell").find(".design_rdobox").removeClass("active"),e.toggleClass("active",e.children("input")[0].checked),!1}),this.$container.find(".opt_email").on("change",function(e){var i=t(this).prev();"self"!=this.value?i.attr("readonly",!0).val(this.value):i.removeAttr("readonly").val("").focus()}),this.inquiryFormValidate()},inquiryFormValidate:function(){t.extend(t.validator.messages,{digits:"숫자를 입력해 주세요",required:"필수항목 입니다.",required2:"{0}(을)를 입력하세요.",photo:"사진을 1장이상 추가하세요.",attach:"{0}(을)를 업로드하세요.",email:"잘못된 형식의 이메일주소",rangelength:"{0} ~ {1}자로 입력하세요.",minlength:"최소 {0}자 이상 입력하세요.",select:"{0}(을)를 선택하세요.",agree:"정책에 동의가 필요합니다.",phoneKR:"잘못된 형식의 핸드폰번호",telKR:"잘못된 형식의 전화번호",alphanumeric:"영어 및 숫자를 입력하세요"}),t.validator.addClassRules({req_chkbox:{required:function(e){return 0==t(e).closest(".element_cell").find("input[type=checkbox]:checked").length}},req_radio:{required:!0},req_text:{required:!0},req_date:{required:!0},req_number:{telKR:!0,required:!0},tf_phone:{telKR:!0},tf_homepage:{_url:!0},req_url:{required:!0,_url:!0},req_email1:{required:!0,alphanumeric:!0},req_email2:{required:!0},req_select:{required:!0},req_time_time:{required:!0},req_time_min:{required:!0},req_address:{required:!0},req_textarea:{required:!0}});var e={errorClass:"form_error",errorElement:"span",focusCleanup:!1,focusInvalid:!0,rules:{nickname:{required:!0,rangelength:[2,20]},pwd:{required:!0,rangelength:[4,20]},email:{email:!0},subject:{minlength:2},phone:{phoneKR:!0}},submitHandler:t.proxy(this.submitWrite,this),errorPlacement:this.elementPlacement};this.$container.find(".frm_write").validate(e)},hideError:function(e){e.on("click",function(){t("#"+t(this).attr("for")).focus()})},elementPlacement:function(e,t){var i=t[0].tagName.toLowerCase(),n=t[0].type;if("radio"!=n){if("checkbox"==n){if(!t.closest(".element_cell").children(".req_validator .form_error").length)return void t.closest(".element_cell").children(".req_validator").html(e)}else if("text"==n){if(t.hasClass("tf_date")&&t.attr("readonly"))return void t.closest(".element_list").append(e);if(t.hasClass("tf_email"))return void t.parent().children(".req_validator").html(e);if(t.hasClass("tf_domain"))return void t.parent().children(".req_validator").html(e);if(t.hasClass("req_address"))return void t.parent().nextAll(".req_validator").html(e);if(t.nextAll(".txt_unit").length)return void t.nextAll(".txt_unit").after(e)}if("select"==i)return t.hasClass("req_select")?isMobile()?void t.parent().nextAll(".req_validator").append(e):void t.nextAll(".req_validator").append(e):t.hasClass("opt_email")?isMobile()?void t.parent().nextAll(".req_validator").html(e):void t.parent().children(".req_validator").html(e):isMobile()?void t.parent().nextAll(".req_validator").html(e):void t.next().after(e);t.after(e)}else t.closest(".element_cell").children(".req_validator").html(e)},submitWrite:function(e){var i=t.validator,n=i.messages;if(e.ahead&&e.ahead.required&&0==e.ahead.value)alert(i.format(n.select,t.trim(t(e.ahead).parent().prev().text())));else{if(t(e).find(".list_file.required").size()>0){var a="";if(t(e).find(".list_file.required").each(function(){if(0==t(this).find("[name^=attach_file]").size()){var e=t(this).parent().prev().text();a+=""!=a?",":"",a+=t.trim(e.replace("*",""))}}),""!=a)return alert(i.format(n.attach,a)),!1}if(t(e).find(".inp_agrees.required input").size()>0&&0==t(e).find(".inp_agrees.required input:checked").size())return alert(n.agree),!1;var r,l=t(e).find(".btn_apply");l.prop("disabled",!0),this.deletedFiles.length>0&&t(e).append('<input type="hidden" name="deleted_files" value="'+this.deletedFiles.join("|")+'">'),this.deletedImgs.length>0&&t(e).append('<input type="hidden" name="deleted_imgs" value="'+this.deletedImgs.join("|")+'">'),r=t(e).serialize()+"&proc=write_article",t.post("DUBU_Board/proc",r,function(t){if("success"==t.result)return 4==e.btype.value&&alert("전송완료 되었습니다"),void(location.href=e.rurl.value);if(alert(t.message),t.code)switch(t.code){case 3:e.pwd.focus()}l.prop("disabled",!1)},"json").fail(function(){l.prop("disabled",!1)})}},addAttach:function(e,i){var n=t("<li>"),a=i.files[0];n.append('<a><span class="txt_file_name">'+a.name+'</span><span class="txt_file_size">'+this.sizeFormat(a.size)+"</span></a>"),n.append('<button type="button" class="btn_comm btn_delete">삭제</button>'),this.$container.list_id.length>0?n.append('<input type="hidden" name="attach_file_custom['+this.$container.list_id+'][]">'):n.append('<input type="hidden" name="attach_file[]">'),i.context=n,i.submit()},doneAttach:function(e,i){var n=t(e.target).closest(".board_write_contents");if(this.$container.list_id.length>0)var a=n.find("."+this.$container.list_id).find(".list_file");else a=n.find(".box_file").eq(0).find(".list_file");var r=i.result;if("success"!=r.result)return alert(r.message),!1;var l=r.file;i.files[0].size||i.context.find(".txt_file_size").text(this.sizeFormat(l.size)),i.context.find("input:hidden").val(l.save_name),i.context.find(".btn_delete").on("click",this.delAttachFile.bind(this)),a.append(i.context).show()},sizeFormat:function(e){if(!e)return 0;var t=Math.floor(Math.log(e)/Math.log(1024));return 1*(e/Math.pow(1024,t)).toFixed(2)+["B","KB","MB","GB"][t]},delAttachFile:function(e){var i=t(e.currentTarget).parent(),n=this.$container.find(".list_file");i.find("[name^=attach_file]").val()&&this.deletedFiles.push(i.find("[name^=attach_file]").val()),i.remove(),0==n.children("li").size()&&n.hide()}});e.loadDubuBoardMain=function(e,t){switch(Number(t.type)){case 0:case 2:case 3:new n(document.getElementById(e),t);break;case 1:new a(document.getElementById(e),t);break;case 4:new r(document.getElementById(e),t)}}}(window,jQuery);